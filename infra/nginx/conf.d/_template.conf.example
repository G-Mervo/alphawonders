# ── Template: Add a new domain ──
# 1. Copy this file:  cp _template.conf.example mydomain.conf
# 2. Replace DOMAIN, CONTAINER, PORT
# 3. Create a new CloudFront distribution with ACM cert for the domain
# 4. Reload nginx:  docker exec nginx-proxy nginx -s reload
#
# server {
#     listen 80;
#     listen [::]:80;
#     server_name DOMAIN www.DOMAIN;
#
#     if ($host = www.DOMAIN) {
#         return 301 https://DOMAIN$request_uri;
#     }
#
#     resolver 127.0.0.11 valid=30s ipv6=off;
#
#     location / {
#         set $upstream CONTAINER:PORT;
#         proxy_pass http://$upstream;
#         proxy_set_header Host              $host;
#         proxy_set_header X-Real-IP         $remote_addr;
#         proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;
#     }
# }
